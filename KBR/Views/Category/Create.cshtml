@model KBR.Models.CreateCategoryViewModel
@{
    ViewData["Title"] = "–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é";
}

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h4>
                </div>
                <div class="card-body">
                    <form asp-action="Create" method="post">
                        <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

                        <div class="mb-3">
                            <label asp-for="CategoryName" class="form-label"></label>
                            <input asp-for="CategoryName" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" />
                            <span asp-validation-for="CategoryName" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="Color" class="form-label">–¶–≤–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</label>
                            <div class="input-group">
                                <input asp-for="Color" type="color" class="form-control form-control-color" id="colorPicker" value="#FF6B6B" />
                                <input asp-for="Color" type="text" class="form-control" id="colorInput" placeholder="#FF6B6B" pattern="^#[0-9A-Fa-f]{6}$" />
                            </div>
                            <small class="form-text text-muted">–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</small>
                            <span asp-validation-for="Color" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="IconUrl" class="form-label">–ò–∫–æ–Ω–∫–∞</label>
                            <select asp-for="IconUrl" class="form-select" id="iconSelect">
                                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∏–∫–æ–Ω–∫—É --</option>
                                <option value="bi-wallet2">üí∞ –ö–æ—à–µ–ª–µ–∫</option>
                                <option value="bi-cart">üõí –ö–æ—Ä–∑–∏–Ω–∞</option>
                                <option value="bi-cup-hot">‚òï –ö–∞—Ñ–µ</option>
                                <option value="bi-car-front">üöó –ê–≤—Ç–æ</option>
                                <option value="bi-fuel-pump">‚õΩ –ê–ó–°</option>
                                <option value="bi-heart-pulse">üíä –ê–ø—Ç–µ–∫–∞</option>
                                <option value="bi-house">üè† –î–æ–º</option>
                                <option value="bi-book">üìö –ö–Ω–∏–≥–∏</option>
                                <option value="bi-bag">üõçÔ∏è –û–¥–µ–∂–¥–∞</option>
                                <option value="bi-shop">üè™ –ú–∞–≥–∞–∑–∏–Ω</option>
                                <option value="bi-taxi-front">üöï –¢–∞–∫—Å–∏</option>
                                <option value="bi-bus-front">üöå –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</option>
                                <option value="bi-device-ssd">üíª –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞</option>
                                <option value="bi-heart">‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ</option>
                                <option value="bi-palette">üé® –ö—Ä–∞—Å–æ—Ç–∞</option>
                                <option value="bi-flower1">üå∏ –¶–≤–µ—Ç—ã</option>
                                <option value="bi-balloon">üéà –î–µ—Ç—Å–∫–æ–µ</option>
                                <option value="bi-hammer">üî® –†–µ–º–æ–Ω—Ç</option>
                                <option value="bi-cup-straw">üç∑ –ê–ª–∫–æ–≥–æ–ª—å</option>
                            </select>
                            <div class="mt-2">
                                <label class="form-label">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∫–æ–Ω–∫–∏:</label>
                                <div id="iconPreview" class="fs-1" style="color: #FF6B6B;">
                                    <i class="bi bi-tag"></i>
                                </div>
                            </div>
                            <span asp-validation-for="IconUrl" class="text-danger"></span>
                        </div>

                        <div class="d-flex justify-content-between">
                            <a asp-action="Index" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</a>
                            <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>
        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è color picker –∏ text input
        document.getElementById('colorPicker').addEventListener('input', function(e) {
            document.getElementById('colorInput').value = e.target.value.toUpperCase();
            updateIconPreview();
        });

        document.getElementById('colorInput').addEventListener('input', function(e) {
            const value = e.target.value;
            if (/^#[0-9A-Fa-f]{6}$/.test(value)) {
                document.getElementById('colorPicker').value = value;
                updateIconPreview();
            }
        });

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é –∏–∫–æ–Ω–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
        document.getElementById('iconSelect').addEventListener('change', function(e) {
            updateIconPreview();
        });

        function updateIconPreview() {
            const iconSelect = document.getElementById('iconSelect');
            const colorInput = document.getElementById('colorInput');
            const preview = document.getElementById('iconPreview');
            
            const iconClass = iconSelect.value || 'bi-tag';
            const color = colorInput.value || '#FF6B6B';
            
            preview.innerHTML = `<i class="${iconClass}"></i>`;
            preview.style.color = color;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        updateIconPreview();
    </script>
}

